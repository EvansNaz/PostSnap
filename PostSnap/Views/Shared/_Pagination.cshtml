@model X.PagedList.IPagedList<object>
@using X.PagedList.Mvc.Core

@{
    var searchTerm = ViewData["CurrentFilter"];
    var sortOrder = ViewData["CurrentSort"];
    var postid = ViewData["PostId"];
    var actionName = ViewContext.RouteData.Values["action"]?.ToString();
    var isCommentPagination = actionName == "Details";
}

<div class="d-flex justify-content-center mt-4">
    @if (isCommentPagination)
    {
        // We're in the Post Details view, paginating comments
        @Html.PagedListPager(Model, page => Url.Action("Details", new
            {
                page,
                id = postid
            }) + "#comments",
                new PagedListRenderOptions
    {
        UlElementClasses = new[] { "pagination" },
        LiElementClasses = new[] { "page-item" },
        PageClasses = new[] { "page-link" },
        DisplayLinkToFirstPage = PagedListDisplayMode.IfNeeded,
        DisplayLinkToLastPage = PagedListDisplayMode.IfNeeded,
        DisplayLinkToIndividualPages = true,
        MaximumPageNumbersToDisplay = 5,
        EllipsesFormat = "...",
        LinkToFirstPageFormat = "{0}",
        LinkToLastPageFormat = "{0}",
    })
    }
    else
    {
        // We're in Index or MyPosts — include the correct action name dynamically
        @Html.PagedListPager(Model, page => Url.Action(actionName, new
            {
                page,
                searchTerm,
                sortOrder,
            }),
                new PagedListRenderOptions
    {
        UlElementClasses = new[] { "pagination" },
        LiElementClasses = new[] { "page-item" },
        PageClasses = new[] { "page-link" },
        DisplayLinkToFirstPage = PagedListDisplayMode.IfNeeded,
        DisplayLinkToLastPage = PagedListDisplayMode.IfNeeded,
        DisplayLinkToNextPage = PagedListDisplayMode.Never,
        DisplayLinkToPreviousPage = PagedListDisplayMode.Never,
        DisplayLinkToIndividualPages = true,
        MaximumPageNumbersToDisplay = 5,
        EllipsesFormat = "...",
        LinkToFirstPageFormat = "<strong style='color:black;'>{0}</strong>",
        LinkToLastPageFormat = "<strong style='color:black;'>{0}</strong>"
    })
    }
</div>
